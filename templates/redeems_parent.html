{% extends "base.html" %}
{% block title %}คำขอแลกรางวัล{% endblock %}

{% block content %}
<div class="container" style="max-width: 860px;">
  <div class="card p-4 shadow-sm">
    <div class="d-flex justify-content-between align-items-center">
      <h3 class="mb-0">คำขอแลกรางวัล (รอตรวจ)</h3>
      <a class="btn btn-outline-secondary" href="{{ request.url_for('dashboard_parent', pid=pid) }}">← กลับแดชบอร์ด</a>
    </div>
    <hr>
    {% if items and items|length > 0 %}
      <div class="list-group">
        {% for it in items %}
          <div class="list-group-item">
            <div class="d-flex justify-content-between align-items-start flex-wrap gap-2">
              <div>
                <div><b>{{ it.kid_name }}</b> ขอแลก <b>{{ it.reward_name }}</b></div>
                <div class="text-muted" style="font-size:0.9rem;">แต้มที่ใช้: {{ it.cost }} · ขอเมื่อ {{ it.created_at }}</div>
              </div>
              <form method="post" action="{{ request.url_for('parent_redeem_decision', redeem_id=it.id) }}" class="d-flex gap-2 m-0">
                <input type="hidden" name="pid" value="{{ pid }}">
                <button class="btn btn-success" name="approve" value="yes" type="submit">อนุมัติ</button>
                <button class="btn btn-outline-danger" name="approve" value="no" type="submit">ปฏิเสธ</button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="text-center text-muted">ยังไม่มีคำขอแลกในตอนนี้</div>
    {% endif %}
  </div>
</div>
{% endblock %}