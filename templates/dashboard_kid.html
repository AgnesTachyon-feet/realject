{% extends "base.html" %}
{% block title %}Kid Dashboard{% endblock %}
{% block content %}
<div class="card" style="max-width:400px;margin:40px auto;text-align:center;padding:24px;border-radius:12px;box-shadow:0 0 10px rgba(0,0,0,0.08);">
  <h2>สวัสดี {{ kid.first_name }}</h2>

  {% if not in_family %}
    <p style="margin:10px 0 6px;">กรอกรหัสครอบครัวจาก Parent เพื่อเข้าร่วม</p>
    <form method="post" action="/kid/join" style="display:grid;gap:10px;">
      <input type="hidden" name="kid_id" value="{{ kid.id }}">
      <input name="code" placeholder="เช่น FAM-A1B2C3" required style="padding:8px;border:1px solid #ccc;border-radius:6px;">
      <button class="btn" type="submit" style="background:#000;color:#fff;border:none;padding:10px;border-radius:6px;cursor:pointer;">เข้าร่วม</button>
    </form>
    {% if request.query_params.get('err') == 'invalid_code' %}
      <div class="alert alert-danger" style="margin-top:10px;">รหัสไม่ถูกต้อง</div>
    {% endif %}
  {% else %}
    <p style="margin:10px 0;">คุณอยู่ในครอบครัว: <b>{{ family_name }}</b></p>
    <!-- ตรงนี้ค่อยโชว์ tasks/rewards ได้ภายหลัง -->
  {% endif %}

  <div style="margin-top:16px;">
    <a class="btn" href="/login" style="background:#f5f5f5;padding:8px 14px;border-radius:6px;text-decoration:none;color:#000;">ออกจากระบบ</a>
  </div>
</div>
{% endblock %}